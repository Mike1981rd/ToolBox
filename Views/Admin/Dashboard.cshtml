@{
    ViewData["Title"] = "Admin Dashboard";
    Layout = "_AdminLayout";
}

<h1 class="h3 mb-3" data-translate-key="welcome_message_admin">Dear Carlos Checo <span data-translate-key="welcome">Welcome</span>. You are logged in as <span data-translate-key="admin_role">Admin</span></h1>

<div class="row">
    <div class="col-md-4 mb-3">
        <div class="card text-bg-primary h-100">
            <div class="card-body text-center">
                <i class="fas fa-users fa-3x mb-2"></i>
                <h2 class="card-title">4</h2>
                <p class="card-text" data-translate-key="total_coach">Total Coach</p>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-3">
        <div class="card text-bg-info h-100">
            <div class="card-body text-center">
                <i class="fas fa-user-check fa-3x mb-2"></i>
                <h2 class="card-title">3</h2>
                <p class="card-text" data-translate-key="active_coaches">Active Coaches</p>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-3">
        <div class="card text-bg-success h-100">
            <div class="card-body text-center">
                <i class="fas fa-chart-line fa-3x mb-2"></i>
                <h2 class="card-title">75%</h2>
                <p class="card-text" data-translate-key="activity_rate">Activity Rate</p>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <!-- Chart Area -->
    <div class="col-lg-8 mb-4">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Sales Overview</h5>
                <div class="dropdown">
                    <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" id="chartOptionsDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        This Month
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="chartOptionsDropdown">
                        <li><a class="dropdown-item" href="#">This Week</a></li>
                        <li><a class="dropdown-item" href="#">This Month</a></li>
                        <li><a class="dropdown-item" href="#">This Year</a></li>
                    </ul>
                </div>
            </div>
            <div class="card-body">
                <div class="chart-container" style="position: relative; height:300px;">
                    <canvas id="salesChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions Card -->
    <div class="col-lg-4 mb-4">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-header bg-transparent border-0">
                <h5 class="mb-0">Quick Actions</h5>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <button class="btn btn-primary" type="button">
                        <i class="fas fa-plus-circle me-2"></i> New Product
                    </button>
                    <button class="btn btn-info text-white" type="button">
                        <i class="fas fa-user-plus me-2"></i> Add User
                    </button>
                    <button class="btn btn-success" type="button">
                        <i class="fas fa-file-invoice-dollar me-2"></i> Create Invoice
                    </button>
                    <button class="btn btn-warning text-dark" type="button">
                        <i class="fas fa-cog me-2"></i> Settings
                    </button>
                    <button class="btn btn-secondary" type="button">
                        <i class="fas fa-file-export me-2"></i> Export Data
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <!-- Recent Activity List -->
    <div class="col-12">
        <div class="card border-0 shadow-sm mb-4">
            <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Recent Activity</h5>
                <button class="btn btn-sm btn-outline-primary">View All</button>
            </div>
            <div class="card-body p-0">
                <div class="list-group list-group-flush">
                    <div class="list-group-item list-group-item-action">
                        <div class="d-flex align-items-center">
                            <div class="activity-icon bg-primary bg-opacity-25 text-primary rounded-circle p-2 me-3">
                                <i class="fas fa-user-plus"></i>
                            </div>
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="mb-0">New user registered</h6>
                                    <small class="text-muted">2 hours ago</small>
                                </div>
                                <p class="text-muted mb-0 small">John Doe created a new account</p>
                            </div>
                        </div>
                    </div>
                    <div class="list-group-item list-group-item-action">
                        <div class="d-flex align-items-center">
                            <div class="activity-icon bg-success bg-opacity-25 text-success rounded-circle p-2 me-3">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="mb-0">New order placed</h6>
                                    <small class="text-muted">5 hours ago</small>
                                </div>
                                <p class="text-muted mb-0 small">Order #2458 for $156.80</p>
                            </div>
                        </div>
                    </div>
                    <div class="list-group-item list-group-item-action">
                        <div class="d-flex align-items-center">
                            <div class="activity-icon bg-warning bg-opacity-25 text-warning rounded-circle p-2 me-3">
                                <i class="fas fa-file-invoice"></i>
                            </div>
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="mb-0">Invoice generated</h6>
                                    <small class="text-muted">Yesterday</small>
                                </div>
                                <p class="text-muted mb-0 small">Invoice #INV-00123 for Client XYZ Corp.</p>
                            </div>
                        </div>
                    </div>
                    <div class="list-group-item list-group-item-action">
                        <div class="d-flex align-items-center">
                            <div class="activity-icon bg-info bg-opacity-25 text-info rounded-circle p-2 me-3">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="mb-0">System update completed</h6>
                                    <small class="text-muted">2 days ago</small>
                                </div>
                                <p class="text-muted mb-0 small">System updated to version 2.5.0</p>
                            </div>
                        </div>
                    </div>
                    <div class="list-group-item list-group-item-action">
                        <div class="d-flex align-items-center">
                            <div class="activity-icon bg-danger bg-opacity-25 text-danger rounded-circle p-2 me-3">
                                <i class="fas fa-bell"></i>
                            </div>
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="mb-0">Server alert</h6>
                                    <small class="text-muted">2 days ago</small>
                                </div>
                                <p class="text-muted mb-0 small">High CPU usage detected on server #2</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            try {
                // Sample chart data
                const ctx = document.getElementById('salesChart').getContext('2d');
                
                // Make salesChart a global variable so it can be accessed from admin-script.js
                window.salesChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                        datasets: [{
                            label: 'Sales',
                            data: [12, 19, 15, 17, 23, 25, 22, 28, 24, 29, 32, 35],
                            borderColor: 'rgba(13, 110, 253, 1)',
                            backgroundColor: 'rgba(13, 110, 253, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true
                        }, {
                            label: 'Revenue',
                            data: [8, 12, 10, 14, 16, 19, 18, 23, 20, 25, 27, 30],
                            borderColor: 'rgba(25, 135, 84, 1)',
                            backgroundColor: 'rgba(25, 135, 84, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        },
                        interaction: {
                            intersect: false,
                            mode: 'index'
                        }
                    }
                });

                console.log("Chart initialized successfully");

                // Theme-aware chart update
                const themeToggle = document.getElementById('theme-toggle');
                if (themeToggle) {
                    themeToggle.addEventListener('click', function() {
                        const isDarkMode = document.documentElement.getAttribute('data-theme') === 'dark';
                        
                        // Update chart colors based on theme
                        if (isDarkMode) {
                            // Light mode colors
                            window.salesChart.data.datasets[0].borderColor = 'rgba(13, 110, 253, 1)';
                            window.salesChart.data.datasets[1].borderColor = 'rgba(25, 135, 84, 1)';
                            window.salesChart.data.datasets[0].backgroundColor = 'rgba(13, 110, 253, 0.1)';
                            window.salesChart.data.datasets[1].backgroundColor = 'rgba(25, 135, 84, 0.1)';
                        } else {
                            // Dark mode colors - slightly brighter for dark background
                            window.salesChart.data.datasets[0].borderColor = 'rgba(50, 145, 255, 1)';
                            window.salesChart.data.datasets[1].borderColor = 'rgba(50, 200, 100, 1)';
                            window.salesChart.data.datasets[0].backgroundColor = 'rgba(50, 145, 255, 0.2)';
                            window.salesChart.data.datasets[1].backgroundColor = 'rgba(50, 200, 100, 0.2)';
                        }
                        
                        window.salesChart.update();
                    });
                }
            } catch (error) {
                console.error("Error initializing chart:", error);
            }
        });
    </script>
}