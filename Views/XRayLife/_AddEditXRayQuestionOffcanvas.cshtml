@* Vista Parcial: Views/XRayLife/_AddEditXRayQuestionOffcanvas.cshtml *@
@{
    // bool isEditMode = ViewData["IsEditMode"] as bool? ?? false;
    // string titleKey = isEditMode ? "offcanvas_edit_xray_question_title" : "offcanvas_add_xray_question_title";
    // var lifeAreasForSelect = ViewBag.LifeAreasForSelect as List<dynamic> ?? new List<dynamic>(); // Pasar desde el controlador
}
<div class="offcanvas offcanvas-end" tabindex="-1" id="addEditXRayQuestionOffcanvas" aria-labelledby="addEditXRayQuestionOffcanvasLabel" style="width: 600px;">
    <div class="offcanvas-header">
        <h5 id="addEditXRayQuestionOffcanvasLabel" class="offcanvas-title" data-translate-key='@ViewData["OffcanvasTitleKey"]'>Add New Question</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body mx-0 flex-grow-0 pt-0 h-100">
        <form class="add-edit-xray-question-form pt-0" id="addEditXRayQuestionForm">
            <input type="hidden" id="xrayQuestionId" name="XRayQuestionId" value="0">

            <div class="mb-3">
                <label class="form-label" for="xrayLifeAreaCategory" data-translate-key="form_label_life_area_category">Area of Life (Category)</label>
                <select class="form-select" id="xrayLifeAreaCategory" name="LifeAreaId">
                    <option value="" data-translate-key="select_life_area_placeholder">Select an Area of Life</option>
                    @* Poblar con ViewBag.LifeAreasForSelect (que debe ser una lista de { Id, TitleKey } ) *@
                    @foreach (var area in (ViewBag.LifeAreasForSelect as List<dynamic> ?? new List<dynamic>()))
                    {
                        <option value="@area.Id" data-translate-key="@area.TitleKey">@area.TitleKey.ToString().Replace("life_area_","").Replace("_"," ").ToUpperInvariant()</option>
                    }
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label" for="xrayQuestionText" data-translate-key="form_label_xray_question">Question</label>
                <textarea class="form-control" id="xrayQuestionText" name="QuestionText" rows="5" placeholder="Enter the question text..." data-translate-placeholder-key="form_placeholder_xray_question"></textarea>
            </div>
            
            @* Futuro: Campo para Respuesta (textarea) *@
            @* Futuro: Campo para Estado (Activo/Inactivo) *@

            <div class="mt-4 d-flex">
                <button type="submit" class="btn btn-primary me-2 data-submit flex-grow-1" data-translate-key="save_button">Save</button>
                <button type="reset" class="btn btn-outline-secondary flex-grow-1" data-bs-dismiss="offcanvas" data-translate-key="cancel_button">Cancel</button>
            </div>
        </form>
    </div>
</div>