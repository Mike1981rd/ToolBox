@{
    ViewData["Title"] = "Customer Details";
    Layout = "_AdminLayout";
    ViewBag.HideTitleInLayout = true;
}

<div class="d-flex flex-wrap justify-content-between align-items-center mb-3">
    <div>
        <h4 class="fw-bold mb-0"><span data-translate-key="customer_details_title_prefix">Customer ID #</span>@ViewBag.CustomerId</h4>
        <small class="text-muted">@ViewBag.CustomerJoinDate</small>
    </div>
    <div>
        <button class="btn btn-sm btn-outline-danger" data-translate-key="button_deactivate_customer">Deactivate Customer</button>
    </div>
</div>

<div class="row g-4">
    <!-- Columna Izquierda: Perfil del Cliente y Tarjeta de Upgrade -->
    <div class="col-12 col-lg-4 col-xl-3">
        <div class="card mb-4 shadow-sm">
            <div class="card-body text-center">
                <img src="https://via.placeholder.com/120x120/7367F0/FFFFFF?Text=LH" alt="Customer Avatar" class="img-fluid rounded-circle mb-3" style="width:120px; height:120px; object-fit:cover;"
                     onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI2MCIgY3k9IjYwIiByPSI2MCIgZmlsbD0iIzczNjdmMCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjQiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSJ3aGl0ZSI+TEg8L3RleHQ+PC9zdmc+'">
                <h5 class="card-title">@ViewBag.CustomerName</h5>
                <p class="text-muted small">Customer ID #@ViewBag.CustomerId</p>
                <div class="d-flex justify-content-around mb-3">
                    <div class="text-center">
                        <h6 class="mb-0">184</h6> 
                        <small data-translate-key="overview_orders_title">Orders</small>
                    </div>
                    <div class="text-center">
                        <h6 class="mb-0">$12,378</h6> 
                        <small data-translate-key="overview_spent_title">Spent</small>
                    </div>
                </div>
                <hr>
                <h6 class="mb-2 text-start" data-translate-key="overview_details_section_title">Details</h6>
                <ul class="list-unstyled text-start mb-0">
                    <li class="mb-1"><strong data-translate-key="overview_username_label">Username:</strong> lorine.hischke</li>
                    <li class="mb-1"><strong data-translate-key="overview_email_label">Email:</strong> vofgon@ultr.org</li>
                    <li class="mb-1"><strong data-translate-key="overview_status_label">Status:</strong> <span class="badge bg-success-subtle text-success-emphasis" data-translate-key="status_active">Active</span></li>
                    <li class="mb-1"><strong data-translate-key="overview_contact_label">Contact:</strong> (123) 456-7890</li>
                    <li class="mb-1"><strong data-translate-key="overview_country_label">Country:</strong> USA</li>
                </ul>
                <a href="@Url.Action("Edit", "Customers", new { id = ViewBag.CustomerId })" class="btn btn-primary w-100 mt-3" data-translate-key="button_edit_details">Edit Details</a>
            </div>
        </div>
        <div class="card shadow-sm">
            <div class="card-body text-center">
                <div class="mb-3">
                    <img src="https://demos.pixinvent.com/vuexy-html-admin-template/assets/img/illustrations/rocket.png" alt="Upgrade" height="80"
                         onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjgwIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIzNiIgZmlsbD0iIzk5OTk5OSI+🚀PC90ZXh0Pjwvc3ZnPg=='">
                </div>
                <h5 data-translate-key="card_upgrade_to_premium_title">Upgrade to premium</h5>
                <p class="small text-muted" data-translate-key="card_upgrade_to_premium_text">Upgrade customer to premium membership to access pro features.</p>
                <button class="btn btn-info w-100" data-translate-key="button_upgrade_to_premium">Upgrade to premium</button>
            </div>
        </div>
    </div>

    <!-- Columna Derecha: Contenido de las Pestañas -->
    <div class="col-12 col-lg-8 col-xl-9">
        <ul class="nav nav-pills flex-column flex-md-row mb-3 nav-fill">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" href="#overview" data-translate-key="tab_overview"><i class="fas fa-user-circle me-1"></i>Overview</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#security" data-translate-key="tab_security"><i class="fas fa-shield-alt me-1"></i>Security</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#addressBilling" data-translate-key="tab_address_billing"><i class="fas fa-map-marker-alt me-1"></i>Address & Billing</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#notifications" data-translate-key="tab_notifications"><i class="fas fa-bell me-1"></i>Notifications</a>
            </li>
        </ul>

        <div class="tab-content shadow-sm">
            <!-- Pestaña Overview (Contenido de la Imagen 1) -->
            <div class="tab-pane fade show active" id="overview" role="tabpanel">
                @await Html.PartialAsync("_CustomerDetailsOverviewTab")
            </div>
            <!-- Pestaña Security (Contenido de la Imagen 2) -->
            <div class="tab-pane fade" id="security" role="tabpanel">
                @await Html.PartialAsync("_CustomerDetailsSecurityTab")
            </div>
            <!-- Pestaña Address & Billing (Contenido de la Imagen 3) -->
            <div class="tab-pane fade" id="addressBilling" role="tabpanel">
                @await Html.PartialAsync("_CustomerDetailsAddressBillingTab")
            </div>
            <!-- Pestaña Notifications (Contenido de la Imagen 4) -->
            <div class="tab-pane fade" id="notifications" role="tabpanel">
                @await Html.PartialAsync("_CustomerDetailsNotificationsTab")
            </div>
        </div>
    </div>
</div>

<!-- Offcanvas/Modal para Editar Cliente (se definirá luego) -->
<!-- @await Html.PartialAsync("_AddEditCustomerOffcanvas", new { IsEditMode = true }) -->

@section Scripts {
    <script src="~/js/customers-script.js"></script>
}